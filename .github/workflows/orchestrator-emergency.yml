name: Orquestrador â€” Modo EmergÃªncia

on:
  workflow_run:
    workflows: ["Orquestrador â€” Validar Pull Requests", "Orquestrador â€” Validar Commits"]
    types:
      - completed

jobs:
  emergency:
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    runs-on: ubuntu-latest

    steps:
      - name: Criar issue de emergÃªncia
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: "ðŸš¨ Modo EmergÃªncia â€” Falha Detetada",
              body: "O Orquestrador detetou uma falha crÃ­tica. Ã‰ necessÃ¡rio intervenÃ§Ã£o imediata.",
              labels: ["bloqueado", "alta-prioridade"]
            })
