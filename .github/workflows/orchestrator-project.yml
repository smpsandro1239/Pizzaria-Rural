name: Orquestrador â€” Sincronizar Project

on:
  issues:
    types: [opened, edited, labeled]
  pull_request:
    types: [opened, closed, merged]

jobs:
  sync-project:
    runs-on: ubuntu-latest

    steps:
      - name: Atualizar estado no Project
        uses: actions/github-script@v7
        with:
          script: |
            const issue = context.payload.issue || context.payload.pull_request
            const labels = issue.labels.map(l => l.name)

            let column = "Backlog"

            if (labels.includes("frontend")) column = "ğŸ› ï¸ Em Progresso â€” Agente 1"
            if (labels.includes("backend")) column = "ğŸ› ï¸ Em Progresso â€” Agente 2"
            if (labels.includes("infra")) column = "ğŸ› ï¸ Em Progresso â€” Agente 3"
            if (labels.includes("revisÃ£o")) column = "ğŸ” Em RevisÃ£o"
            if (labels.includes("concluÃ­do")) column = "âœ… ConcluÃ­do"

            console.log(`Mover issue/PR para coluna: ${column}`)
